.flickity-slide {
  display: inline-block;

  @for $i from 1 to 9 {
    @media (--s-max) {
      .carousel--col-$i & {
        width: calc(100% / $i - (($i - 1) * var(--gutter-xxs) / $i));
        margin-right: var(--gutter-xxs);
      }

      /* Fallback to grid if Flickity is not enabled */
      .carousel--col-$i .flickity:not(.flickity-enabled) &:nth-child($(i)n) {
        margin-right: 0;
      }

      .carousel--margin-$i .flickity:not(.flickity-enabled) &:nth-child(n+$i) {
        margin-top: var(--gutter-xxs);
      }
    }

    @media (--s) and (--m-max) {
      .carousel--col-s-$i & {
        width: calc(100% / $i - (($i - 1) * var(--gutter-s) / $i));
        margin-right: var(--gutter-s);
      }

      /* Fallback to grid if Flickity is not enabled */
      .carousel--col-s-$i .flickity:not(.flickity-enabled) &:nth-child($(i)n) {
        margin-right: 0;
      }

      .carousel--margin-s-$i .flickity:not(.flickity-enabled) &:nth-child(n+$i) {
        margin-top: var(--gutter-s);
      }
    }

    @media (--m) and (--l-max) {
      .carousel--col-m-$i & {
        width: calc(100% / $i - (($i - 1) * var(--gutter-m) / $i));
        margin-right: var(--gutter-m);
      }

      /* Fallback to grid if Flickity is not enabled */
      .carousel--col-m-$i .flickity:not(.flickity-enabled) &:nth-child($(i)n) {
        margin-right: 0;
      }

      .carousel--margin-m-$i .flickity:not(.flickity-enabled) &:nth-child(n+$i) {
        margin-top: var(--gutter-m);
      }
    }

    @media (--l) {
      .carousel--col-l-$i & {
        width: calc(100% / $i - (($i - 1) * var(--gutter-l) / $i));
        margin-right: var(--gutter-l);
      }

      /* Fallback to grid if Flickity is not enabled */
      .carousel--col-l-$i .flickity:not(.flickity-enabled) &:nth-child($(i)n) {
        margin-right: 0;
      }

      .carousel--margin-l-$i .flickity:not(.flickity-enabled) &:nth-child(n+$i) {
        margin-top: var(--gutter-l);
      }
    }
  }
}
