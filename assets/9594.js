"use strict";(self.webpackChunkwknd_nation=self.webpackChunkwknd_nation||[]).push([[9594],{89594:function(t,i,e){e.r(i);e(69826),e(41539),e(68309),e(66992),e(33948),e(47941),e(74916),e(15306),e(73210),e(9653);var a=e(2934),n=e.n(a),r=e(66773),s=e(70975),c=e(51369),o=e(11235),u=e(93081),d=e.n(u),h=(e(21249),e(88674),e(23123),e(78783),{data:function(){return{content:[]}},computed:{modalContent:function(){return this.content.map((function(t,i){return{id:t.id,name:t.title,content:t.body_html}}))}},methods:{fetchPage:function(t){var i="/pages/".concat(t,".json");return fetch(i).then((function(t){return t.json()}))},openSizeGuideModal:function(t){if(t.indexOf(",")){var i=t.split(",").map(this.fetchPage);return Promise.all(i).then(this.handleResponse)}this.fetchPage(t).then(this.handleResponse)},handleResponse:function(t){var i=this;t instanceof Array?(this.content=[],t.map((function(t){var e=t.page;i.content.push(e)}))):this.content=t,this.showModal=!0},closeModal:function(){this.showModal=!1}}});n().use(d()),n().component("product-form",{mixins:[h],props:["enableMiniCart","addToCartText","soldOutText","showPriceInButton","unavailableText","selectedVariant","bundleDiscountMessageFormat"],data:function(){var t=window.BARREL.product,i=window.BARREL.variants;return{state:s.Z,product:t,productVariants:i,quantity:1,min:1,showModal:!1}},watch:{"state.selectedOptions":{handler:function(){this.pickActiveVariant(),this.updateQuantity(),this.updateURL()},deep:!0},activeVariant:{handler:function(){this.updateProductStatus()}},deep:!0},mounted:function(){var t=this,i=this.product.variants.find((function(i){return i.id===+t.selectedVariant}));s.Z.selectedOptions=this.product.options_with_values.reduce((function(t,e,a){return t[e.name]=i?i.options[a]:e.values[0],t}),{})},methods:{updateQuantity:function(){if(this.hasVariant&&this.activeVariant.available){var t=this.activeVariant.inventory_quantity,i=this.quantity,e=t?Math.min(i,t):i;this.quantity=Math.max(this.min,e)}else this.quantity=0},pickActiveVariant:function(){for(var t=this.product,i=t.variants,e=void 0===i?[]:i,a=t.options,n=void 0===a?[]:a,r=function(t){var i=e[t];if(n.every((function(t,e){return i["option".concat(e+1)]===s.Z.selectedOptions[t]})))return s.Z.activeVariant=i,"break";s.Z.activeVariant={}},c=0;c<e.length;c++){if("break"===r(c))break}},updateSelectedOption:function(t,i){s.Z.selectedOptions[t]=i},onSelectChange:function(t){var i=t.name,e=t.value;this.updateSelectedOption(i,e)},addToCart:function(){var t=this.$refs.addToCartStatus;t&&(t.setAttribute("aria-hidden",!1),setTimeout((function(){t.setAttribute("aria-hidden",!0)}),1e3)),r.Z.add({id:this.activeVariant.id,quantity:this.quantity}).then(this.onItemAdded)},getOptionValue:function(t){if(s.Z.selectedOptions)return s.Z.selectedOptions[t]},updateProductStatus:function(){var t=this.$refs.productStatus;t&&(t.textContent=this.liveRegionText(),t.setAttribute("aria-hidden",!1),setTimeout((function(){t.setAttribute("aria-hidden",!0)}),1e3))},liveRegionText:function(){var t="[Availability] [Regular] [$$] [Sale] [$]";if(0===Object.keys(this.activeVariant).length)return"Unavailable";var i=this.activeVariant.available?"":"Sold out,";t=t.replace("[Availability]",i);var e="",a=(0,o.lb)(this.activeVariant.price),n="",r="";return this.activeVariant.compare_at_price>this.activeVariant.price&&(e="Regular price",a=(0,o.lb)(this.activeVariant.compare_at_price)+",",n="Sale price",r=(0,o.lb)(this.activeVariant.price)),t=t.replace("[Regular]",e).replace("[$$]",a).replace("[Sale]",n).replace("[$]",r).trim(),t},onItemAdded:function(){c.Z.$emit("add-to-cart"),s.Z.isMiniCartOpen=!0},updateURL:function(){this.activeVariant.id&&window.history.replaceState("","",(0,o.iD)("variant",this.activeVariant.id))}},computed:{formattedPrice:function(){return(0,o.lb)(this.activeVariant.price)},hasVariant:function(){return Object.keys(this.activeVariant).length},maximumQuantity:function(){return this.hasVariant&&"continue"!==this.activeVariant.inventory_policy&&this.activeVariant.available?-1!==this.activeVariant.inventory_quantity?this.activeVariant.inventory_quantity:Number.POSITIVE_INFINITY:null},activeVariant:function(){return this.state.activeVariant},selectedOptions:function(){return this.state.selectedOptions},submitButtonText:function(){return this.hasVariant?this.preOrder&&this.preOrder.enable&&this.hasVariant?this.preOrder.buttonText:this.activeVariant.available?this.addToCartText:this.soldOutText:this.unavailableText},isOnSale:function(){return this.activeVariant?this.activeVariant.compare_at_price>this.activeVariant.price:this.product.compare_at_price>this.product.price},formattedCompareAtPrice:function(){return(0,o.lb)(this.activeVariant.compare_at_price)},isBundle:function(){return"sets"===this.product.type.toLowerCase()},bundleDiscountMessage:function(){var t=this.activeVariant.compare_at_price-this.activeVariant.price,i=(0,o.lb)(t),e=Math.round(100*t/this.activeVariant.compare_at_price)+"%";return this.bundleDiscountMessageFormat.replace("{discount_amount}",i).replace("{discount_percent}",e)},preOrder:function(){var t=this;if(this.activeVariant)return this.productVariants.find((function(i){return i.id===t.activeVariant.id}))},preOrderMessage:function(){if(this.preOrder&&this.preOrder.enable&&this.hasVariant)return this.preOrder.message}}})}}]);