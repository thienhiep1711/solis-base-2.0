"use strict";(self.webpackChunkwknd_nation=self.webpackChunkwknd_nation||[]).push([[4588],{34588:function(t,s,e){e.r(s);e(74916),e(64765),e(47941),e(41539),e(69600),e(21249),e(92222),e(26699),e(32023),e(15306),e(68309),e(57327),e(23123);var n=e(2934),i=e.n(n),u=e(17563),r=e(11235),a=e(49910),o=e(36808),c=e.n(o);e(18725),e(64355),e(66322),e(60273);s.default=function(t){return new(i())({el:t,data:function(){return{state:!1,questions:[],currentQuestion:0,progressIndex:0,answers:u.parse(document.location.search),query:!1,tags:[],results:!1,resultText:!1,noResultText:!1}},created:function(){this.questions=quizData.questions,this.state="questions",this.resultText=quizData.resultText,this.noResultText=quizData.noResultText},mounted:function(){Object.keys(this.answers).length>0&&this.skipToResults()},computed:{questionsState:function(){return"questions"===this.state},loadingState:function(){return"loading"===this.state},resultsState:function(){return"results"===this.state},questionTitles:function(){return this.questions.reduce((function(t,s){return s.title.length>0&&t.push(s.title),t}),[])},searchQuery:function(){return this.tags.map((function(t){return"(".concat(t.map((function(t){return'tag:"'.concat(t,'"')})).join(" OR "),")")})).join(" AND ")},searchUrl:function(){return"".concat(document.location.origin,"/search?q=").concat(this.searchQuery,"&view=quiz-results-endpoint")},updatedResultText:function(){return this.resultText.includes("[name]")?this.resultText.replace("[name]",this.answers.name):this.resultText},answersStringified:function(){return JSON.stringify(this.answers)}},methods:{skipToQuestion:function(t){parseInt(t.target.dataset.questionIndex)<=this.progressIndex&&(this.currentQuestion=parseInt(t.target.dataset.questionIndex))},handleAnswer:function(t){this.answers[t.questionKey]=t.answer,this.updateQuery(),this.updateTags(),this.currentQuestion+1===this.questions.length?(this.state="loading",this.updateURL(),this.handleResults(3e3)):this.currentQuestion++},updateQuery:function(){this.query=u.stringify(this.answers)},updateTags:function(){var t=this;this.tags=Object.keys(this.answers).filter((function(t){return"name"!==t&&"email"!==t})).map((function(s){var e=t.answers[s].split(",");return"skin-type"===s&&e.push("All"),e.map((function(t){return"".concat(s,"-").concat((0,r.v8)(t))}))}))},handleResults:function(t){var s=this;this.saveResults(),a.ajax({url:this.searchUrl},(function(t,e){s.results=JSON.parse(e).results})),setTimeout((function(t){s.state="results"}),t)},saveResults:function(){c().set("quiz_answers",this.answersStringified)},skipToResults:function(){this.updateQuery(),this.updateTags(),this.state="loading",this.handleResults(1e3)},updateURL:function(){var t="".concat(window.location,"?").concat(this.query);window.history.pushState("","",t)},retakeQuiz:function(){var t=window.location.href.split("?")[0];window.history.pushState("","",t);for(var s=0,e=Object.keys(this.answers);s<e.length;s++){var n=e[s];"name"!==n&&(this.answers[n]="")}this.tags=[],this.query=!1,this.currentQuestion=1,this.state="questions",console.log(this.state)}}})}}}]);