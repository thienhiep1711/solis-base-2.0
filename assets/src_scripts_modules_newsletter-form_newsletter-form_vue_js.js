"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkwknd_nation"] = self["webpackChunkwknd_nation"] || []).push([["src_scripts_modules_newsletter-form_newsletter-form_vue_js"],{

/***/ "./src/scripts/modules/newsletter-form/newsletter-form.vue.js":
/*!********************************************************************!*\
  !*** ./src/scripts/modules/newsletter-form/newsletter-form.vue.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.function.name.js */ \"./node_modules/core-js/modules/es.function.name.js\");\n/* harmony import */ var core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"./node_modules/core-js/modules/es.object.to-string.js\");\n/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.array.join.js */ \"./node_modules/core-js/modules/es.array.join.js\");\n/* harmony import */ var core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.array.map.js */ \"./node_modules/core-js/modules/es.array.map.js\");\n/* harmony import */ var core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.object.keys.js */ \"./node_modules/core-js/modules/es.object.keys.js\");\n/* harmony import */ var core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/es.array.concat.js */ \"./node_modules/core-js/modules/es.array.concat.js\");\n/* harmony import */ var core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"./node_modules/core-js/modules/es.number.constructor.js\");\n/* harmony import */ var core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/es.regexp.exec.js */ \"./node_modules/core-js/modules/es.regexp.exec.js\");\n/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! core-js/modules/es.symbol.js */ \"./node_modules/core-js/modules/es.symbol.js\");\n/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! core-js/modules/es.array.filter.js */ \"./node_modules/core-js/modules/es.array.filter.js\");\n/* harmony import */ var core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var core_js_modules_es_object_get_own_property_descriptor_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"./node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n/* harmony import */ var core_js_modules_es_object_get_own_property_descriptor_js__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_get_own_property_descriptor_js__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ \"./node_modules/core-js/modules/web.dom-collections.for-each.js\");\n/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var core_js_modules_es_object_get_own_property_descriptors_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptors.js */ \"./node_modules/core-js/modules/es.object.get-own-property-descriptors.js\");\n/* harmony import */ var core_js_modules_es_object_get_own_property_descriptors_js__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_get_own_property_descriptors_js__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! vue */ \"./node_modules/vue/dist/vue.js\");\n/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(vue__WEBPACK_IMPORTED_MODULE_17__);\n/* harmony import */ var jsonp__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! jsonp */ \"./node_modules/jsonp/index.js\");\n/* harmony import */ var jsonp__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(jsonp__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var nanoajax__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! nanoajax */ \"./node_modules/nanoajax/index.js\");\n/* harmony import */ var lib_util__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! lib/util */ \"./src/scripts/lib/util.js\");\n/* harmony import */ var modules_text_input_text_input_vue__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! modules/text-input/text-input.vue */ \"./src/scripts/modules/text-input/text-input.vue.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\n\nvue__WEBPACK_IMPORTED_MODULE_17___default().component('newsletter-form', {\n  props: ['provider', 'mailchimpUrl', 'klaviyoUrl', 'klaviyoGroup', 'errorText', 'successText', 'subscribedText', 'showNameField'],\n  data: function data() {\n    return {\n      callbackFnName: 'newsletterSuccess',\n      query: _objectSpread(_objectSpread({}, this.provider === 'klaviyo' && {\n        g: this.klaviyoGroup\n      }), this.showNameField && {\n        '$fields': '$first_name'\n      }),\n      response: false,\n      hasError: false\n    };\n  },\n  computed: {\n    responseText: function responseText() {\n      return (0,lib_util__WEBPACK_IMPORTED_MODULE_15__.decode)(this.response);\n    }\n  },\n  methods: {\n    onInputChange: function onInputChange(_ref) {\n      var name = _ref.name,\n          value = _ref.value;\n      this.query[name] = value;\n    },\n    submit: function submit(e) {\n      var _this = this;\n\n      e.preventDefault();\n      var isValid = this.$children.every(function (c) {\n        return c.validate();\n      });\n\n      if (!isValid) {\n        this.response = '';\n        this.hasError = true;\n        return;\n      }\n\n      var query = Object.keys(this.query).map(function (k) {\n        var value = _this.query[k];\n\n        if (_this.provider === 'mailchimp') {\n          value = encodeURIComponent(value);\n        }\n\n        return \"\".concat(k, \"=\").concat(value);\n      }).join('&');\n\n      if (this.provider === 'mailchimp') {\n        jsonp__WEBPACK_IMPORTED_MODULE_13___default()(\"\".concat(this.mailchimpUrl, \"&\").concat(query), {\n          param: 'c'\n        }, this.mailchimpResponseHandler);\n      } else if (this.provider === 'klaviyo') {\n        nanoajax__WEBPACK_IMPORTED_MODULE_14__.ajax({\n          body: query,\n          url: this.klaviyoUrl,\n          action: 'POST'\n        }, this.klaviyoResponseHandler);\n      }\n    },\n    mailchimpResponseHandler: function mailchimpResponseHandler(err, data) {\n      if (err) {\n        this.response = this.errorText;\n        return;\n      }\n\n      if (data && data['msg']) {\n        this.response = data['msg'];\n      }\n    },\n    klaviyoResponseHandler: function klaviyoResponseHandler(status, data) {\n      if (Number(status) !== 200) {\n        this.response = this.errorText;\n        this.hasError = true;\n        return;\n      }\n\n      var parsed = JSON.parse(data);\n\n      if (parsed && parsed['success']) {\n        this.hasError = false;\n        this.response = parsed.data.is_subscribed ? this.subscribedText : this.successText;\n        this.$emit('success', true);\n      } else {\n        this.hasError = true;\n        this.response = this.errorText;\n      }\n    },\n    isValidEmail: function isValidEmail(_ref2) {\n      var value = _ref2.value;\n      return /\\S+@\\S+\\.\\S+/.test(value);\n    }\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9tb2R1bGVzL25ld3NsZXR0ZXItZm9ybS9uZXdzbGV0dGVyLWZvcm0udnVlLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFQQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7O0FBQ0E7QUFFQTtBQUFBO0FBQUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUE3REE7QUEzQkEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93a25kLW5hdGlvbi8uL3NyYy9zY3JpcHRzL21vZHVsZXMvbmV3c2xldHRlci1mb3JtL25ld3NsZXR0ZXItZm9ybS52dWUuanM/ODI2YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVnVlIGZyb20gJ3Z1ZSdcbmltcG9ydCBqc29ucCBmcm9tICdqc29ucCdcbmltcG9ydCBuYW5vYWpheCBmcm9tICduYW5vYWpheCdcbmltcG9ydCB7IGRlY29kZSB9IGZyb20gJ2xpYi91dGlsJ1xuaW1wb3J0ICdtb2R1bGVzL3RleHQtaW5wdXQvdGV4dC1pbnB1dC52dWUnXG5cblZ1ZS5jb21wb25lbnQoJ25ld3NsZXR0ZXItZm9ybScsIHtcbiAgcHJvcHM6IFtcbiAgICAncHJvdmlkZXInLFxuICAgICdtYWlsY2hpbXBVcmwnLFxuICAgICdrbGF2aXlvVXJsJyxcbiAgICAna2xhdml5b0dyb3VwJyxcbiAgICAnZXJyb3JUZXh0JyxcbiAgICAnc3VjY2Vzc1RleHQnLFxuICAgICdzdWJzY3JpYmVkVGV4dCcsXG4gICAgJ3Nob3dOYW1lRmllbGQnXG4gIF0sXG4gIGRhdGEgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBjYWxsYmFja0ZuTmFtZTogJ25ld3NsZXR0ZXJTdWNjZXNzJyxcbiAgICAgIHF1ZXJ5OiB7XG4gICAgICAgIC4uLih0aGlzLnByb3ZpZGVyID09PSAna2xhdml5bycgJiYgeyBnOiB0aGlzLmtsYXZpeW9Hcm91cCB9KSxcbiAgICAgICAgLi4uKHRoaXMuc2hvd05hbWVGaWVsZCAmJiB7ICckZmllbGRzJzogJyRmaXJzdF9uYW1lJyB9KVxuICAgICAgfSxcbiAgICAgIHJlc3BvbnNlOiBmYWxzZSxcbiAgICAgIGhhc0Vycm9yOiBmYWxzZVxuICAgIH1cbiAgfSxcbiAgY29tcHV0ZWQ6IHtcbiAgICByZXNwb25zZVRleHQgKCkge1xuICAgICAgcmV0dXJuIGRlY29kZSh0aGlzLnJlc3BvbnNlKVxuICAgIH1cbiAgfSxcbiAgbWV0aG9kczoge1xuICAgIG9uSW5wdXRDaGFuZ2UgKHtuYW1lLCB2YWx1ZX0pIHtcbiAgICAgIHRoaXMucXVlcnlbbmFtZV0gPSB2YWx1ZVxuICAgIH0sXG4gICAgc3VibWl0IChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KClcblxuICAgICAgY29uc3QgaXNWYWxpZCA9IHRoaXMuJGNoaWxkcmVuLmV2ZXJ5KGMgPT4gYy52YWxpZGF0ZSgpKVxuICAgICAgaWYgKCFpc1ZhbGlkKSB7XG4gICAgICAgIHRoaXMucmVzcG9uc2UgPSAnJ1xuICAgICAgICB0aGlzLmhhc0Vycm9yID0gdHJ1ZVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgY29uc3QgcXVlcnkgPSBPYmplY3Qua2V5cyh0aGlzLnF1ZXJ5KS5tYXAoayA9PiB7XG4gICAgICAgIGxldCB2YWx1ZSA9IHRoaXMucXVlcnlba11cbiAgICAgICAgaWYgKHRoaXMucHJvdmlkZXIgPT09ICdtYWlsY2hpbXAnKSB7XG4gICAgICAgICAgdmFsdWUgPSBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGAke2t9PSR7dmFsdWV9YFxuICAgICAgfSkuam9pbignJicpXG5cbiAgICAgIGlmICh0aGlzLnByb3ZpZGVyID09PSAnbWFpbGNoaW1wJykge1xuICAgICAgICBqc29ucChgJHt0aGlzLm1haWxjaGltcFVybH0mJHtxdWVyeX1gLCB7XG4gICAgICAgICAgcGFyYW06ICdjJ1xuICAgICAgICB9LCB0aGlzLm1haWxjaGltcFJlc3BvbnNlSGFuZGxlcilcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm92aWRlciA9PT0gJ2tsYXZpeW8nKSB7XG4gICAgICAgIG5hbm9hamF4LmFqYXgoe1xuICAgICAgICAgIGJvZHk6IHF1ZXJ5LFxuICAgICAgICAgIHVybDogdGhpcy5rbGF2aXlvVXJsLFxuICAgICAgICAgIGFjdGlvbjogJ1BPU1QnXG4gICAgICAgIH0sIHRoaXMua2xhdml5b1Jlc3BvbnNlSGFuZGxlcilcbiAgICAgIH1cbiAgICB9LFxuICAgIG1haWxjaGltcFJlc3BvbnNlSGFuZGxlciAoZXJyLCBkYXRhKSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHRoaXMucmVzcG9uc2UgPSB0aGlzLmVycm9yVGV4dFxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGlmIChkYXRhICYmIGRhdGFbJ21zZyddKSB7XG4gICAgICAgIHRoaXMucmVzcG9uc2UgPSBkYXRhWydtc2cnXVxuICAgICAgfVxuICAgIH0sXG4gICAga2xhdml5b1Jlc3BvbnNlSGFuZGxlciAoc3RhdHVzLCBkYXRhKSB7XG4gICAgICBpZiAoTnVtYmVyKHN0YXR1cykgIT09IDIwMCkge1xuICAgICAgICB0aGlzLnJlc3BvbnNlID0gdGhpcy5lcnJvclRleHRcbiAgICAgICAgdGhpcy5oYXNFcnJvciA9IHRydWVcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKGRhdGEpXG4gICAgICBpZiAocGFyc2VkICYmIHBhcnNlZFsnc3VjY2VzcyddKSB7XG4gICAgICAgIHRoaXMuaGFzRXJyb3IgPSBmYWxzZVxuICAgICAgICB0aGlzLnJlc3BvbnNlID0gcGFyc2VkLmRhdGEuaXNfc3Vic2NyaWJlZCA/IHRoaXMuc3Vic2NyaWJlZFRleHQgOiB0aGlzLnN1Y2Nlc3NUZXh0XG4gICAgICAgIHRoaXMuJGVtaXQoJ3N1Y2Nlc3MnLCB0cnVlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5oYXNFcnJvciA9IHRydWVcbiAgICAgICAgdGhpcy5yZXNwb25zZSA9IHRoaXMuZXJyb3JUZXh0XG4gICAgICB9XG4gICAgfSxcbiAgICBpc1ZhbGlkRW1haWwgKHsgdmFsdWUgfSkge1xuICAgICAgcmV0dXJuIC9cXFMrQFxcUytcXC5cXFMrLy50ZXN0KHZhbHVlKVxuICAgIH1cbiAgfVxufSlcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/modules/newsletter-form/newsletter-form.vue.js\n");

/***/ })

}]);