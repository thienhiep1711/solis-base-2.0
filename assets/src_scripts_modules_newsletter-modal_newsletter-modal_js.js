"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkwknd_nation"] = self["webpackChunkwknd_nation"] || []).push([["src_scripts_modules_newsletter-modal_newsletter-modal_js"],{

/***/ "./src/scripts/modules/newsletter-modal/newsletter-modal.js":
/*!******************************************************************!*\
  !*** ./src/scripts/modules/newsletter-modal/newsletter-modal.js ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! vue */ \"./node_modules/vue/dist/vue.js\");\n/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(vue__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var cookies_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! cookies-js */ \"./node_modules/cookies-js/dist/cookies.js\");\n/* harmony import */ var cookies_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(cookies_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var dom_event__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! dom-event */ \"./node_modules/dom-event/index.js\");\n/* harmony import */ var dom_event__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(dom_event__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var lib_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lib/util */ \"./src/scripts/lib/util.js\");\n\n\n\n\nvar COOKIE_NAME = 'newsletter_modal';\nvar EXPIRE_TIME = 60 * 60 * 24 * 7; // set cookie expire time to 7 days\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (function (el) {\n  return new (vue__WEBPACK_IMPORTED_MODULE_3___default())({\n    el: el,\n    data: function data() {\n      return {\n        isActive: false,\n        delay: null,\n        focusEl: null\n      };\n    },\n    methods: {\n      initNewsletterModal: function initNewsletterModal() {\n        var _this = this;\n\n        var cookie = Boolean(cookies_js__WEBPACK_IMPORTED_MODULE_0___default().get(COOKIE_NAME));\n\n        if (!cookie) {\n          setTimeout(function () {\n            _this.isActive = true;\n          }, this.delay);\n          setTimeout(function () {\n            var newsletterModalWrapper = _this.$refs.newsletterModalWrapper;\n\n            if (newsletterModalWrapper) {\n              _this.focusEl = document.activeElement;\n              newsletterModalWrapper.focus();\n              (0,lib_util__WEBPACK_IMPORTED_MODULE_2__.trapFocus)(newsletterModalWrapper);\n            }\n          }, this.delay + 300);\n        }\n      },\n      closeNewsletterModal: function closeNewsletterModal() {\n        var _this2 = this;\n\n        var delay = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n        cookies_js__WEBPACK_IMPORTED_MODULE_0___default().set(COOKIE_NAME, '1', {\n          expires: EXPIRE_TIME\n        });\n\n        if (delay > 0) {\n          setTimeout(function () {\n            _this2.isActive = false;\n          }, delay);\n        } else {\n          this.isActive = false;\n        }\n\n        if (this.focusEl) {\n          this.focusEl.focus();\n        }\n      },\n      handleSuccessSignUp: function handleSuccessSignUp(isSuccessSignUp) {\n        if (isSuccessSignUp) {\n          this.closeNewsletterModal(this.delay);\n        }\n      },\n      keyDownHandler: function keyDownHandler(e) {\n        if (this.isActive && e.key === 'Escape') {\n          this.closeNewsletterModal();\n        }\n      }\n    },\n    mounted: function mounted() {\n      this.delay = el.getAttribute('data-modal-delay') * 1000;\n      this.initNewsletterModal();\n      dom_event__WEBPACK_IMPORTED_MODULE_1___default()(window, 'keydown', this.keyDownHandler);\n    }\n  });\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9tb2R1bGVzL25ld3NsZXR0ZXItbW9kYWwvbmV3c2xldHRlci1tb2RhbC5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTs7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFBQTs7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7O0FBQUE7QUFDQTtBQUFBO0FBQUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTFDQTtBQTRDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBekRBO0FBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93a25kLW5hdGlvbi8uL3NyYy9zY3JpcHRzL21vZHVsZXMvbmV3c2xldHRlci1tb2RhbC9uZXdzbGV0dGVyLW1vZGFsLmpzPzU3NWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFZ1ZSBmcm9tICd2dWUnXG5pbXBvcnQgQ29va2llcyBmcm9tICdjb29raWVzLWpzJ1xuaW1wb3J0IG9uIGZyb20gJ2RvbS1ldmVudCdcbmltcG9ydCB7IHRyYXBGb2N1cyB9IGZyb20gJ2xpYi91dGlsJ1xuXG5jb25zdCBDT09LSUVfTkFNRSA9ICduZXdzbGV0dGVyX21vZGFsJ1xuY29uc3QgRVhQSVJFX1RJTUUgPSA2MCAqIDYwICogMjQgKiA3IC8vIHNldCBjb29raWUgZXhwaXJlIHRpbWUgdG8gNyBkYXlzXG5cbmV4cG9ydCBkZWZhdWx0IGVsID0+IG5ldyBWdWUoe1xuICBlbCxcbiAgZGF0YSAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlzQWN0aXZlOiBmYWxzZSxcbiAgICAgIGRlbGF5OiBudWxsLFxuICAgICAgZm9jdXNFbDogbnVsbFxuICAgIH1cbiAgfSxcbiAgbWV0aG9kczoge1xuICAgIGluaXROZXdzbGV0dGVyTW9kYWwgKCkge1xuICAgICAgY29uc3QgY29va2llID0gQm9vbGVhbihDb29raWVzLmdldChDT09LSUVfTkFNRSkpXG5cbiAgICAgIGlmICghY29va2llKSB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIHRoaXMuaXNBY3RpdmUgPSB0cnVlXG4gICAgICAgIH0sIHRoaXMuZGVsYXkpXG5cbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgY29uc3QgbmV3c2xldHRlck1vZGFsV3JhcHBlciA9IHRoaXMuJHJlZnMubmV3c2xldHRlck1vZGFsV3JhcHBlclxuICAgICAgICAgIGlmIChuZXdzbGV0dGVyTW9kYWxXcmFwcGVyKSB7XG4gICAgICAgICAgICB0aGlzLmZvY3VzRWwgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50XG4gICAgICAgICAgICBuZXdzbGV0dGVyTW9kYWxXcmFwcGVyLmZvY3VzKClcbiAgICAgICAgICAgIHRyYXBGb2N1cyhuZXdzbGV0dGVyTW9kYWxXcmFwcGVyKVxuICAgICAgICAgIH1cbiAgICAgICAgfSwgdGhpcy5kZWxheSArIDMwMClcbiAgICAgIH1cbiAgICB9LFxuICAgIGNsb3NlTmV3c2xldHRlck1vZGFsIChkZWxheSA9IG51bGwpIHtcbiAgICAgIENvb2tpZXMuc2V0KENPT0tJRV9OQU1FLCAnMScsIHtleHBpcmVzOiBFWFBJUkVfVElNRX0pXG4gICAgICBpZiAoZGVsYXkgPiAwKSB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIHRoaXMuaXNBY3RpdmUgPSBmYWxzZVxuICAgICAgICB9LCBkZWxheSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaXNBY3RpdmUgPSBmYWxzZVxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5mb2N1c0VsKSB7XG4gICAgICAgIHRoaXMuZm9jdXNFbC5mb2N1cygpXG4gICAgICB9XG4gICAgfSxcbiAgICBoYW5kbGVTdWNjZXNzU2lnblVwIChpc1N1Y2Nlc3NTaWduVXApIHtcbiAgICAgIGlmIChpc1N1Y2Nlc3NTaWduVXApIHtcbiAgICAgICAgdGhpcy5jbG9zZU5ld3NsZXR0ZXJNb2RhbCh0aGlzLmRlbGF5KVxuICAgICAgfVxuICAgIH0sXG4gICAga2V5RG93bkhhbmRsZXIgKGUpIHtcbiAgICAgIGlmICh0aGlzLmlzQWN0aXZlICYmIGUua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgICB0aGlzLmNsb3NlTmV3c2xldHRlck1vZGFsKClcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIG1vdW50ZWQgKCkge1xuICAgIHRoaXMuZGVsYXkgPSBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtbW9kYWwtZGVsYXknKSAqIDEwMDBcbiAgICB0aGlzLmluaXROZXdzbGV0dGVyTW9kYWwoKVxuICAgIG9uKHdpbmRvdywgJ2tleWRvd24nLCB0aGlzLmtleURvd25IYW5kbGVyKVxuICB9XG59KVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/scripts/modules/newsletter-modal/newsletter-modal.js\n");

/***/ })

}]);