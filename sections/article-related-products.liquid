{%- assign settings = section.settings -%}
{%- assign title = article.metafields.related_products.title | default: settings.title -%}
{%- assign tagline = article.metafields.related_products.tagline | default: settings.tagline -%}
{%- assign related_products = article.metafields.related_products.products | split: '|' -%}

{%- if related_products != blank -%}
  {%- render 'related-products',
    enable: settings.enable_related_products,
    tagline: tagline,
    title: title,
    is_list: true,
    blocks: related_products -%}
{%- endif -%}

{% schema %}
  {
    "name": "Related Products",
    "settings": [
      {
        "type": "checkbox",
        "id": "enable_related_products",
        "label": "Enable Related Products",
        "default": false
      },
      {
        "type": "text",
        "id": "tagline",
        "label": "Tagline (Optional)"
      },
      {
        "type": "text",
        "id": "title",
        "label": "Title"
      }
    ]
  }
{% endschema %}
