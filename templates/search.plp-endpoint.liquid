{%- layout none -%}
{%- paginate search.results by 50 -%}
  {
  "menu":[],
  "products":[
  {%- for product in search.results -%}{% comment %}EasylockdownFilterBegin{% endcomment %}{% capture easylockdownFilter %}{% render 'easylockdown_filter_search' with product, easylockdownRender: true, easylockdownItemSelectorOff: easylockdownItemSelectorOff %}{% endcapture %}{% assign easylockdownFilter = easylockdownFilter | strip %}{% if easylockdownFilter == 'continue' %}{% continue %}{% else %}{{ easylockdownFilter }}{% endif %}{% comment %}EasylockdownFilterEnd{% endcomment %}
    {%- render 'product-json',
      item: product,
      encode: false -%}{%- unless forloop.last -%},{%- endunless -%}
  {%- endfor -%}
  ],
  "pages":{{ paginate.pages }},
  "page":{{ current_page | minus: 1 }}
  }
{%- endpaginate -%}
