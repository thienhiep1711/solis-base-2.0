{%- comment -%}
  Parameters
  * encode
  * section_settings
  * section_blocks
{%- endcomment -%}
{%- assign encode = encode | default: false -%}

{%- capture json -%}
{
  "inverted_mode": {{ section_settings.inverted_mode | json }},
  "enable_overlay": {{ section_settings.enable_overlay | json }},
  "overlay_opacity": {{ section_settings.overlay_opacity | json }},
  "hero_style": {{ section_settings.hero_style | json }},
  "background_color": {{ section_settings.background_color | json }},
  "image": {{ section_settings.image | json }},
  "image_intermediate": {{ section_settings.image_intermediate | json }},
  "image_mobile": {{ section_settings.image_mobile | json }},
  "video": {{ section_settings.video | json }},
  "video_s": {{ section_settings.video_s | json }},
  "video_l": {{ section_settings.video_l | json }},
  "content_alignment": {{ section_settings.content_alignment | json }},
  "text_alignment": {{ section_settings.text_alignment | json }},
  "blocks": [
    {%- for block in section_blocks -%}
      {
        "collection": {{ block.settings.collection | json }},
        "inverted_mode": {{ block.settings.inverted_mode | json }},
        "enable_overlay": {{ block.settings.enable_overlay | json }},
        "overlay_opacity": {{ block.settings.overlay_opacity | json }},
        "hero_style": {{ block.settings.hero_style | json }},
        "background_color": {{ block.settings.background_color | json }},
        "image_intermediate": {{ block.settings.image_intermediate | json }},
        "image_mobile": {{ block.settings.image_mobile | json }},
        "video": {{ block.settings.video | json }},
        "video_s": {{ block.settings.video_s | json }},
        "video_l": {{ block.settings.video_l | json }},
        "content_alignment": {{ block.settings.content_alignment | json }},
        "text_alignment": {{ block.settings.text_alignment | json }}
      }{%- unless forloop.last -%},{%- endunless -%}
    {%- endfor -%}
  ]
}
{%- endcapture -%}
{%- if encode -%}
  {{- json | strip | strip_newlines | url_encode -}}
{%- else -%}
  {{- json -}}
{%- endif -%}
