{%- comment -%}
  Parameters
  * product
  * blocks
{%- endcomment -%}

{%- for block in blocks -%}
  {%- if block.type == 'size-guide' -%}
    {%- assign product_types = block.settings.product_types | replace: ', ', ',' | split: ',' -%}
    {%- if product_types contains product.type -%}
      {%- assign content_size_guide = content_size_guide | append: ',' | append: block.settings.page -%}
    {%- endif -%}
  {%- endif -%}
{%- endfor -%}

{%- assign disable_section_size_guide = product.metafields.size_guides.disable_section_size_guide -%}
{%- assign size_guide_pages = product.metafields.size_guides.pages | split: '|' -%}

{%- if disable_section_size_guide -%}
  {%- assign content_size_guide = '' -%}
{%- endif -%}

{%- for size_guide_page in size_guide_pages -%}
  {%- assign content_size_guide = content_size_guide | append: ',' | append: size_guide_page -%}
{%- endfor -%}

{%- assign content_size_guide = content_size_guide | remove_first: ',' -%}

{{- content_size_guide -}}
